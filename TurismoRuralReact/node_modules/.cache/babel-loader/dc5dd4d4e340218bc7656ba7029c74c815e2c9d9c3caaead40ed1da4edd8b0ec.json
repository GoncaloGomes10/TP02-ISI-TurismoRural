{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hugo\\\\Desktop\\\\repositorio\\\\TP02-ISI-TurismoRural\\\\TurismoRuralReact\\\\src\\\\Casas\\\\casadetalhes.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport styles from './casas.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CasaDetalhes = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [casa, setCasa] = useState(null);\n  const [imagemUrl, setImagemUrl] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [dataInicio, setDataInicio] = useState('');\n  const [dataFim, setDataFim] = useState('');\n  const [reservaMensagem, setReservaMensagem] = useState('');\n  const [reservaErro, setReservaErro] = useState('');\n  const [isReservando, setIsReservando] = useState(false);\n  const [reservasCasa, setReservasCasa] = useState([]);\n  const [avaliacoes, setAvaliacoes] = useState([]);\n  const [isLoadingAvaliacoes, setIsLoadingAvaliacoes] = useState(true);\n  useEffect(() => {\n    const fetchCasa = async () => {\n      try {\n        const response = await fetch(`http://localhost:5211/api/Casas/${id}`);\n        if (response.ok) {\n          const data = await response.json();\n          setCasa(data);\n        } else {\n          setError('Casa n√£o encontrada.');\n        }\n      } catch (err) {\n        console.error('Erro ao carregar casa:', err);\n        setError('Erro de conex√£o. Tente novamente.');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const fetchImagem = async () => {\n      try {\n        const resp = await fetch(`http://localhost:5211/api/Casa_Img/${id}`);\n        if (resp.ok) {\n          const imgs = await resp.json();\n          if (imgs && imgs.length > 0) {\n            const img = imgs[0];\n            setImagemUrl(img.url || img.Url || img.pathImagem || img.PathImagem);\n          }\n        }\n      } catch (err) {\n        console.error('Erro ao carregar imagem da casa:', err);\n      }\n    };\n    const atualizarEstadosReservas = async () => {\n      try {\n        const token = localStorage.getItem('accessToken');\n        if (!token) return;\n        await fetch('http://localhost:5211/api/Reservas/AtualizarEstados', {\n          method: 'PUT',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      } catch (err) {\n        console.error('Erro ao atualizar estados das reservas:', err);\n      }\n    };\n    const fetchReservasCasa = async () => {\n      try {\n        const resp = await fetch(`http://localhost:5211/api/Reservas/PorCasa/${id}`);\n        if (resp.ok) {\n          const data = await resp.json();\n          setReservasCasa(data);\n        }\n      } catch (err) {\n        console.error('Erro ao carregar reservas da casa:', err);\n      }\n    };\n    const fetchAvaliacoes = async () => {\n      try {\n        setIsLoadingAvaliacoes(true);\n        const response = await fetch(`http://localhost:5211/api/Avaliacoes/PorCasa/${id}`);\n        if (response.ok) {\n          const data = await response.json();\n          setAvaliacoes(data);\n        }\n      } catch (err) {\n        console.error('Erro ao carregar avalia√ß√µes:', err);\n      } finally {\n        setIsLoadingAvaliacoes(false);\n      }\n    };\n    (async () => {\n      await atualizarEstadosReservas();\n      fetchCasa();\n      fetchImagem();\n      fetchReservasCasa();\n      fetchAvaliacoes();\n    })();\n  }, [id]);\n  const handleLogout = async () => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      if (token) {\n        await fetch('http://localhost:5211/api/Utilizadores/logout', {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Erro no logout:', error);\n    } finally {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('refreshToken');\n      navigate('/');\n    }\n  };\n  const goHome = () => navigate('/');\n  const goCasas = () => navigate('/casas');\n  const parseDate = str => {\n    if (!str) return null;\n    return new Date(str.toString().split('T')[0] + 'T00:00:00');\n  };\n  const isDateBlocked = dateStr => {\n    if (!dateStr) return false;\n    const d = parseDate(dateStr);\n    if (!d) return false;\n    return reservasCasa.some(r => {\n      const start = parseDate(r.dataInicio || r.DataInicio);\n      const end = parseDate(r.dataFim || r.DataFim);\n      if (!start || !end) return false;\n      return d >= start && d < end;\n    });\n  };\n  const handleCriarReserva = async e => {\n    e.preventDefault();\n    setReservaMensagem('');\n    setReservaErro('');\n    if (!dataInicio || !dataFim) {\n      setReservaErro('Por favor selecione as datas de in√≠cio e fim.');\n      return;\n    }\n    if (isDateBlocked(dataInicio) || isDateBlocked(dataFim)) {\n      setReservaErro('As datas selecionadas j√° est√£o reservadas para esta casa.');\n      return;\n    }\n    setIsReservando(true);\n    try {\n      const body = {\n        casaID: parseInt(id, 10),\n        dataInicio: dataInicio,\n        dataFim: dataFim\n      };\n      const token = localStorage.getItem('accessToken');\n      const response = await fetch('http://localhost:5211/api/Reservas/CriarReserva', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(body)\n      });\n      if (response.ok) {\n        const text = await response.text();\n        setReservaMensagem(text || 'Reserva criada com sucesso!');\n        const resp = await fetch(`http://localhost:5211/api/Reservas/PorCasa/${id}`);\n        if (resp.ok) {\n          const data = await resp.json();\n          setReservasCasa(data);\n        }\n      } else {\n        const text = await response.text();\n        console.error('Erro ao criar reserva:', text);\n        setReservaErro(text || 'Erro ao criar reserva.');\n      }\n    } catch (err) {\n      console.error('Erro na reserva:', err);\n      setReservaErro('Erro de conex√£o. Tente novamente.');\n    } finally {\n      setIsReservando(false);\n    }\n  };\n  const calcularMediaAvaliacoes = () => {\n    if (avaliacoes.length === 0) return 0;\n    const soma = avaliacoes.reduce((acc, a) => acc + Number(a.nota), 0);\n    return (soma / avaliacoes.length).toFixed(1);\n  };\n  const renderStars = nota => {\n    const valor = Number(nota) || 0;\n    return Array.from({\n      length: 5\n    }, (_, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n      className: valor > i ? styles.starFilled : styles.starEmpty,\n      title: `${i + 1} estrelas`,\n      children: \"\\u2605\"\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this));\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.headerContent,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logo,\n            onClick: goHome,\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.logoIcon,\n              children: \"\\uD83C\\uDFD5\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.logoText,\n              children: \"Turismo Rural\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: styles.main,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"A carregar casa...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this);\n  }\n  if (!casa) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.header,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.headerContent,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logo,\n            onClick: goHome,\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.logoIcon,\n              children: \"\\uD83C\\uDFD5\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.logoText,\n              children: \"Turismo Rural\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.backButton,\n            onClick: goHome,\n            children: \"Voltar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: styles.main,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error || 'Casa n√£o encontrada.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this);\n  }\n  const titulo = casa.titulo || casa.Titulo;\n  const tipo = casa.tipo || casa.Tipo;\n  const tipologia = casa.tipologia || casa.Tipologia;\n  const descricao = casa.descricao || casa.Descricao;\n  const preco = casa.preco || casa.Preco;\n  const morada = casa.morada || casa.Morada;\n  const codigoPostal = casa.codigoPostal || casa.CodigoPostal;\n  const formatData = d => {\n    if (!d) return '';\n    return d.toString().split('T')[0];\n  };\n  const hojeStr = new Date().toISOString().split('T')[0];\n  const datasConflito = dataInicio && dataFim && (isDateBlocked(dataInicio) || isDateBlocked(dataFim));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: styles.header,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.headerContent,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.logo,\n          onClick: goHome,\n          style: {\n            cursor: 'pointer'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoIcon,\n            children: \"\\uD83C\\uDFD5\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.logoText,\n            children: \"Turismo Rural\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.backButton,\n            onClick: goCasas,\n            style: {\n              marginRight: '0.75rem'\n            },\n            children: \"Voltar \\xE0s casas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.backButton,\n            onClick: handleLogout,\n            children: \"Sair\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: titulo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.subtitle,\n        children: [tipo, \" \\xB7 \", tipologia]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), imagemUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imagemUrl,\n        alt: titulo,\n        className: styles.detalheImagem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.card,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.cardDesc,\n          children: descricao\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.cardPrice,\n          children: [preco, \" \\u20AC / noite\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.cardAddress,\n          children: [morada, \", \", codigoPostal]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.avaliacoesCard,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.avaliacoesHeader,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: styles.avaliacoesTitle,\n            children: \"Avalia\\xE7\\xF5es\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), avaliacoes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.mediaContainer,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.mediaStars,\n              children: renderStars(Number(calcularMediaAvaliacoes()))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.mediaTexto,\n              children: [calcularMediaAvaliacoes(), \" (\", avaliacoes.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), isLoadingAvaliacoes ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.loadingText,\n          children: \"A carregar avalia\\xE7\\xF5es...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this) : avaliacoes.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.semAvaliacoes,\n          children: \"Nenhuma avalia\\xE7\\xE3o.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listaAvaliacoes,\n          children: avaliacoes.map(avaliacao => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.avaliacaoItem,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.avaliacaoHeader,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.nomeUtilizador,\n                children: avaliacao.nomeUtilizador\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.starsContainer,\n                children: [renderStars(Number(avaliacao.nota)), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: styles.notaNum,\n                  children: Number(avaliacao.nota)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.comentario,\n              children: avaliacao.comentario\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 19\n            }, this)]\n          }, avaliacao.avaliacaoID, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.reservaCard,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: styles.reservaTitle,\n          children: \"Fazer reserva\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this), reservaMensagem && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.messageSuccess,\n          children: reservaMensagem\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), reservaErro && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.error,\n          children: reservaErro\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleCriarReserva,\n          className: styles.reservaForm,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.reservaRow,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.reservaField,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Data de in\\xEDcio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: dataInicio,\n                onChange: e => setDataInicio(e.target.value),\n                required: true,\n                min: hojeStr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.reservaField,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Data de fim\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                value: dataFim,\n                onChange: e => setDataFim(e.target.value),\n                required: true,\n                min: dataInicio || hojeStr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: styles.buttonPrimary,\n            disabled: isReservando,\n            style: {\n              marginTop: '1rem',\n              minWidth: '220px'\n            },\n            children: isReservando ? 'A reservar...' : 'Reservar esta casa'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), datasConflito && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.reservaWarning,\n          children: \"As datas escolhidas incluem dias que j\\xE1 est\\xE3o reservados para esta casa.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.reservasLista,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Reservas existentes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), reservasCasa.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.reservasEmpty,\n            children: \"Ainda n\\xE3o existem reservas para esta casa.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: reservasCasa.map(r => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [formatData(r.dataInicio || r.DataInicio), \" at\\xE9\", ' ', formatData(r.dataFim || r.DataFim)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.reservaEstado,\n                children: r.estado || r.Estado\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 457,\n                columnNumber: 21\n              }, this)]\n            }, r.reservaID || r.ReservaID, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: styles.footer,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.footerContent,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.footerText,\n          children: \"\\xA9 2025 Turismo Rural. Descubra Portugal aut\\xEAntico.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 5\n  }, this);\n};\n_s(CasaDetalhes, \"swbFAC2+SQj0LqND8hCZn1F3rUk=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CasaDetalhes;\nexport default CasaDetalhes;\nvar _c;\n$RefreshReg$(_c, \"CasaDetalhes\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","styles","jsxDEV","_jsxDEV","CasaDetalhes","_s","id","navigate","casa","setCasa","imagemUrl","setImagemUrl","isLoading","setIsLoading","error","setError","dataInicio","setDataInicio","dataFim","setDataFim","reservaMensagem","setReservaMensagem","reservaErro","setReservaErro","isReservando","setIsReservando","reservasCasa","setReservasCasa","avaliacoes","setAvaliacoes","isLoadingAvaliacoes","setIsLoadingAvaliacoes","fetchCasa","response","fetch","ok","data","json","err","console","fetchImagem","resp","imgs","length","img","url","Url","pathImagem","PathImagem","atualizarEstadosReservas","token","localStorage","getItem","method","headers","fetchReservasCasa","fetchAvaliacoes","handleLogout","removeItem","goHome","goCasas","parseDate","str","Date","toString","split","isDateBlocked","dateStr","d","some","r","start","DataInicio","end","DataFim","handleCriarReserva","e","preventDefault","body","casaID","parseInt","JSON","stringify","text","calcularMediaAvaliacoes","soma","reduce","acc","a","Number","nota","toFixed","renderStars","valor","Array","from","_","i","className","starFilled","starEmpty","title","children","fileName","_jsxFileName","lineNumber","columnNumber","container","header","headerContent","logo","onClick","style","cursor","logoIcon","logoText","main","backButton","titulo","Titulo","tipo","Tipo","tipologia","Tipologia","descricao","Descricao","preco","Preco","morada","Morada","codigoPostal","CodigoPostal","formatData","hojeStr","toISOString","datasConflito","marginRight","subtitle","src","alt","detalheImagem","card","cardDesc","cardPrice","cardAddress","avaliacoesCard","avaliacoesHeader","avaliacoesTitle","mediaContainer","mediaStars","mediaTexto","loadingText","semAvaliacoes","listaAvaliacoes","map","avaliacao","avaliacaoItem","avaliacaoHeader","nomeUtilizador","starsContainer","notaNum","comentario","avaliacaoID","reservaCard","reservaTitle","messageSuccess","onSubmit","reservaForm","reservaRow","reservaField","type","value","onChange","target","required","min","buttonPrimary","disabled","marginTop","minWidth","reservaWarning","reservasLista","reservasEmpty","reservaEstado","estado","Estado","reservaID","ReservaID","footer","footerContent","footerText","_c","$RefreshReg$"],"sources":["C:/Users/Hugo/Desktop/repositorio/TP02-ISI-TurismoRural/TurismoRuralReact/src/Casas/casadetalhes.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport styles from './casas.module.css';\r\n\r\nconst CasaDetalhes = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [casa, setCasa] = useState(null);\r\n  const [imagemUrl, setImagemUrl] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  const [dataInicio, setDataInicio] = useState('');\r\n  const [dataFim, setDataFim] = useState('');\r\n  const [reservaMensagem, setReservaMensagem] = useState('');\r\n  const [reservaErro, setReservaErro] = useState('');\r\n  const [isReservando, setIsReservando] = useState(false);\r\n  const [reservasCasa, setReservasCasa] = useState([]);\r\n\r\n  const [avaliacoes, setAvaliacoes] = useState([]);\r\n  const [isLoadingAvaliacoes, setIsLoadingAvaliacoes] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchCasa = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:5211/api/Casas/${id}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setCasa(data);\r\n        } else {\r\n          setError('Casa n√£o encontrada.');\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro ao carregar casa:', err);\r\n        setError('Erro de conex√£o. Tente novamente.');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    const fetchImagem = async () => {\r\n      try {\r\n        const resp = await fetch(`http://localhost:5211/api/Casa_Img/${id}`);\r\n        if (resp.ok) {\r\n          const imgs = await resp.json();\r\n          if (imgs && imgs.length > 0) {\r\n            const img = imgs[0];\r\n            setImagemUrl(\r\n              img.url ||\r\n              img.Url ||\r\n              img.pathImagem ||\r\n              img.PathImagem\r\n            );\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro ao carregar imagem da casa:', err);\r\n      }\r\n    };\r\n\r\n    const atualizarEstadosReservas = async () => {\r\n      try {\r\n        const token = localStorage.getItem('accessToken');\r\n        if (!token) return;\r\n\r\n        await fetch('http://localhost:5211/api/Reservas/AtualizarEstados', {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      } catch (err) {\r\n        console.error('Erro ao atualizar estados das reservas:', err);\r\n      }\r\n    };\r\n\r\n    const fetchReservasCasa = async () => {\r\n      try {\r\n        const resp = await fetch(`http://localhost:5211/api/Reservas/PorCasa/${id}`);\r\n        if (resp.ok) {\r\n          const data = await resp.json();\r\n          setReservasCasa(data);\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro ao carregar reservas da casa:', err);\r\n      }\r\n    };\r\n\r\n    const fetchAvaliacoes = async () => {\r\n      try {\r\n        setIsLoadingAvaliacoes(true);\r\n        const response = await fetch(`http://localhost:5211/api/Avaliacoes/PorCasa/${id}`);\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setAvaliacoes(data);\r\n        }\r\n      } catch (err) {\r\n        console.error('Erro ao carregar avalia√ß√µes:', err);\r\n      } finally {\r\n        setIsLoadingAvaliacoes(false);\r\n      }\r\n    };\r\n\r\n    (async () => {\r\n      await atualizarEstadosReservas();\r\n      fetchCasa();\r\n      fetchImagem();\r\n      fetchReservasCasa();\r\n      fetchAvaliacoes();\r\n    })();\r\n  }, [id]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      if (token) {\r\n        await fetch('http://localhost:5211/api/Utilizadores/logout', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro no logout:', error);\r\n    } finally {\r\n      localStorage.removeItem('accessToken');\r\n      localStorage.removeItem('refreshToken');\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  const goHome = () => navigate('/');\r\n  const goCasas = () => navigate('/casas');\r\n\r\n  const parseDate = (str) => {\r\n    if (!str) return null;\r\n    return new Date(str.toString().split('T')[0] + 'T00:00:00');\r\n  };\r\n\r\n  const isDateBlocked = (dateStr) => {\r\n    if (!dateStr) return false;\r\n    const d = parseDate(dateStr);\r\n    if (!d) return false;\r\n\r\n    return reservasCasa.some((r) => {\r\n      const start = parseDate(r.dataInicio || r.DataInicio);\r\n      const end = parseDate(r.dataFim || r.DataFim);\r\n      if (!start || !end) return false;\r\n      return d >= start && d < end;\r\n    });\r\n  };\r\n\r\n  const handleCriarReserva = async (e) => {\r\n    e.preventDefault();\r\n    setReservaMensagem('');\r\n    setReservaErro('');\r\n\r\n    if (!dataInicio || !dataFim) {\r\n      setReservaErro('Por favor selecione as datas de in√≠cio e fim.');\r\n      return;\r\n    }\r\n\r\n    if (isDateBlocked(dataInicio) || isDateBlocked(dataFim)) {\r\n      setReservaErro('As datas selecionadas j√° est√£o reservadas para esta casa.');\r\n      return;\r\n    }\r\n\r\n    setIsReservando(true);\r\n    try {\r\n      const body = {\r\n        casaID: parseInt(id, 10),\r\n        dataInicio: dataInicio,\r\n        dataFim: dataFim\r\n      };\r\n\r\n      const token = localStorage.getItem('accessToken');\r\n\r\n      const response = await fetch('http://localhost:5211/api/Reservas/CriarReserva', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      if (response.ok) {\r\n        const text = await response.text();\r\n        setReservaMensagem(text || 'Reserva criada com sucesso!');\r\n        const resp = await fetch(`http://localhost:5211/api/Reservas/PorCasa/${id}`);\r\n        if (resp.ok) {\r\n          const data = await resp.json();\r\n          setReservasCasa(data);\r\n        }\r\n      } else {\r\n        const text = await response.text();\r\n        console.error('Erro ao criar reserva:', text);\r\n        setReservaErro(text || 'Erro ao criar reserva.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Erro na reserva:', err);\r\n      setReservaErro('Erro de conex√£o. Tente novamente.');\r\n    } finally {\r\n      setIsReservando(false);\r\n    }\r\n  };\r\n\r\n  const calcularMediaAvaliacoes = () => {\r\n    if (avaliacoes.length === 0) return 0;\r\n    const soma = avaliacoes.reduce((acc, a) => acc + Number(a.nota), 0);\r\n    return (soma / avaliacoes.length).toFixed(1);\r\n  };\r\n\r\n  const renderStars = (nota) => {\r\n    const valor = Number(nota) || 0;\r\n    return Array.from({ length: 5 }, (_, i) => (\r\n      <span\r\n        key={i}\r\n        className={valor > i ? styles.starFilled : styles.starEmpty}\r\n        title={`${i + 1} estrelas`}\r\n      >\r\n        ‚òÖ\r\n      </span>\r\n    ));\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <header className={styles.header}>\r\n          <div className={styles.headerContent}>\r\n            <div\r\n              className={styles.logo}\r\n              onClick={goHome}\r\n              style={{ cursor: 'pointer' }}\r\n            >\r\n              <div className={styles.logoIcon}>üèïÔ∏è</div>\r\n              <div className={styles.logoText}>Turismo Rural</div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n        <main className={styles.main}>\r\n          <p>A carregar casa...</p>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!casa) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <header className={styles.header}>\r\n          <div className={styles.headerContent}>\r\n            <div\r\n              className={styles.logo}\r\n              onClick={goHome}\r\n              style={{ cursor: 'pointer' }}\r\n            >\r\n              <div className={styles.logoIcon}>üèïÔ∏è</div>\r\n              <div className={styles.logoText}>Turismo Rural</div>\r\n            </div>\r\n            <button className={styles.backButton} onClick={goHome}>\r\n              Voltar\r\n            </button>\r\n          </div>\r\n        </header>\r\n        <main className={styles.main}>\r\n          <p>{error || 'Casa n√£o encontrada.'}</p>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const titulo = casa.titulo || casa.Titulo;\r\n  const tipo = casa.tipo || casa.Tipo;\r\n  const tipologia = casa.tipologia || casa.Tipologia;\r\n  const descricao = casa.descricao || casa.Descricao;\r\n  const preco = casa.preco || casa.Preco;\r\n  const morada = casa.morada || casa.Morada;\r\n  const codigoPostal = casa.codigoPostal || casa.CodigoPostal;\r\n\r\n  const formatData = (d) => {\r\n    if (!d) return '';\r\n    return (d.toString().split('T')[0]);\r\n  };\r\n\r\n  const hojeStr = new Date().toISOString().split('T')[0];\r\n  const datasConflito =\r\n    dataInicio && dataFim && (isDateBlocked(dataInicio) || isDateBlocked(dataFim));\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {/* Header */}\r\n      <header className={styles.header}>\r\n        <div className={styles.headerContent}>\r\n          <div\r\n            className={styles.logo}\r\n            onClick={goHome}\r\n            style={{ cursor: 'pointer' }}\r\n          >\r\n            <div className={styles.logoIcon}>üèïÔ∏è</div>\r\n            <div className={styles.logoText}>Turismo Rural</div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              className={styles.backButton}\r\n              onClick={goCasas}\r\n              style={{ marginRight: '0.75rem' }}\r\n            >\r\n              Voltar √†s casas\r\n            </button>\r\n            <button\r\n              className={styles.backButton}\r\n              onClick={handleLogout}\r\n            >\r\n              Sair\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Conte√∫do da Casa */}\r\n      <main className={styles.main}>\r\n        <h1 className={styles.title}>{titulo}</h1>\r\n        <p className={styles.subtitle}>\r\n          {tipo} ¬∑ {tipologia}\r\n        </p>\r\n\r\n        {imagemUrl && (\r\n          <img\r\n            src={imagemUrl}\r\n            alt={titulo}\r\n            className={styles.detalheImagem}\r\n          />\r\n        )}\r\n\r\n        <div className={styles.card}>\r\n          <p className={styles.cardDesc}>{descricao}</p>\r\n          <p className={styles.cardPrice}>{preco} ‚Ç¨ / noite</p>\r\n          <p className={styles.cardAddress}>\r\n            {morada}, {codigoPostal}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Avalia√ß√µes */}\r\n        <div className={styles.avaliacoesCard}>\r\n          <div className={styles.avaliacoesHeader}>\r\n            <h2 className={styles.avaliacoesTitle}>Avalia√ß√µes</h2>\r\n            {avaliacoes.length > 0 && (\r\n              <div className={styles.mediaContainer}>\r\n                <div className={styles.mediaStars}>\r\n                  {renderStars(Number(calcularMediaAvaliacoes()))}\r\n                </div>\r\n                <span className={styles.mediaTexto}>\r\n                  {calcularMediaAvaliacoes()} ({avaliacoes.length})\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {isLoadingAvaliacoes ? (\r\n            <p className={styles.loadingText}>A carregar avalia√ß√µes...</p>\r\n          ) : avaliacoes.length === 0 ? (\r\n            <p className={styles.semAvaliacoes}>Nenhuma avalia√ß√£o.</p>\r\n          ) : (\r\n            <div className={styles.listaAvaliacoes}>\r\n              {avaliacoes.map((avaliacao) => (\r\n                <div key={avaliacao.avaliacaoID} className={styles.avaliacaoItem}>\r\n                  <div className={styles.avaliacaoHeader}>\r\n                    <span className={styles.nomeUtilizador}>\r\n                      {avaliacao.nomeUtilizador}\r\n                    </span>\r\n                    <div className={styles.starsContainer}>\r\n                      {renderStars(Number(avaliacao.nota))}\r\n                      <span className={styles.notaNum}>\r\n                        {Number(avaliacao.nota)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <p className={styles.comentario}>{avaliacao.comentario}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Reserva */}\r\n        <div className={styles.reservaCard}>\r\n          <h2 className={styles.reservaTitle}>Fazer reserva</h2>\r\n\r\n          {reservaMensagem && (\r\n            <div className={styles.messageSuccess}>\r\n              {reservaMensagem}\r\n            </div>\r\n          )}\r\n          {reservaErro && (\r\n            <div className={styles.error}>\r\n              {reservaErro}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleCriarReserva} className={styles.reservaForm}>\r\n            <div className={styles.reservaRow}>\r\n              <div className={styles.reservaField}>\r\n                <label>Data de in√≠cio</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dataInicio}\r\n                  onChange={(e) => setDataInicio(e.target.value)}\r\n                  required\r\n                  min={hojeStr}\r\n                />\r\n              </div>\r\n              <div className={styles.reservaField}>\r\n                <label>Data de fim</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dataFim}\r\n                  onChange={(e) => setDataFim(e.target.value)}\r\n                  required\r\n                  min={dataInicio || hojeStr}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className={styles.buttonPrimary}\r\n              disabled={isReservando}\r\n              style={{ marginTop: '1rem', minWidth: '220px' }}\r\n            >\r\n              {isReservando ? 'A reservar...' : 'Reservar esta casa'}\r\n            </button>\r\n          </form>\r\n\r\n          {datasConflito && (\r\n            <p className={styles.reservaWarning}>\r\n              As datas escolhidas incluem dias que j√° est√£o reservados para esta casa.\r\n            </p>\r\n          )}\r\n\r\n          <div className={styles.reservasLista}>\r\n            <h3>Reservas existentes</h3>\r\n            {reservasCasa.length === 0 ? (\r\n              <p className={styles.reservasEmpty}>\r\n                Ainda n√£o existem reservas para esta casa.\r\n              </p>\r\n            ) : (\r\n              <ul>\r\n                {reservasCasa.map((r) => (\r\n                  <li key={r.reservaID || r.ReservaID}>\r\n                    <span>\r\n                      {formatData(r.dataInicio || r.DataInicio)} at√©{' '}\r\n                      {formatData(r.dataFim || r.DataFim)}\r\n                    </span>\r\n                    <span className={styles.reservaEstado}>\r\n                      {r.estado || r.Estado}\r\n                    </span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n\r\n      <footer className={styles.footer}>\r\n        <div className={styles.footerContent}>\r\n          <p className={styles.footerText}>\r\n            ¬© 2025 Turismo Rural. Descubra Portugal aut√™ntico.\r\n          </p>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CasaDetalhes;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}